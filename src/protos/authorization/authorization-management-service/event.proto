syntax = "proto3";

package authorization.authorization_management_service.v2;

import "authorization/authorization-management-service/authorization_management.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

option go_package = "github.com/doordash/services-protobuf/generated/authorization/authorization_management_service";
option java_generic_services = true;
option java_multiple_files = true;
option java_package = "com.doordash.rpc.authorization";

// A policy change event from AuthorizationManagementService
// It contains all the necessary data for downstream to consume the changes without talking back to AMS
message AuthorizationManagementChangeEvent {
  // Unique uuid for the policy change event, generated by the AMS upon publishing the event.
  string event_id = 1;
  // The policies that was changed.
  repeated Policy polices = 2;
  // The time the change occurred.
  google.protobuf.Timestamp event_time = 3;
  // The user sets of the policy.
  repeated UserSet user_sets = 4;
  // The resource sets of the policy.
  repeated ResourceSet resource_sets = 5;
}
