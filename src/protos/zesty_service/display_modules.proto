syntax = "proto3";

package zesty_service.v1;

import "common/common.proto";
import "common/money.proto";
import "google/protobuf/wrappers.proto";
import "zesty_service/models.proto";

option go_package = "github.com/doordash/services-protobuf/generated/zesty_service/api/v1";
option java_generic_services = true;
option java_multiple_files = true;
option java_package = "com.doordash.zesty_service.rpc.api";

// DisplayModule represents the main container for UI components in the store page.
// It can contain different types of content like headers, action buttons, or menu categories.
message DisplayModule {
  // Content variants for different types of display modules
  oneof content {
    // Restaurant header with image and basic info
    HeaderContent header_content = 1;
    // Quick actions content (e.g. Call, Website, etc)
    ActionButtonsContent action_buttons_content = 2;
    // Collection of images displayed in a collage format
    MediaCollageContent media_collage_content = 3;
    // AI-generated summary content with citations
    LLMSummaryContent llm_summary_content = 4;
    // Menu category content. Maps a section of the "Menu" tab on the store page.
    MenuCategoryContent menu_category_content = 5;
    // Store reaction content. Maps a section of the "Reactions" buttons on the store page.
    StoreReactionContent store_reaction_content = 6;
  }

  // HeaderContent represents the main header section of a store page, containing
  // essential information like name, hero image, business hours, and address.
  message HeaderContent {
    // Restaurant name
    string name = 1;
    // Main hero image URL
    google.protobuf.StringValue hero_image_url = 2;
    // Business hours information
    BusinessHours hours = 3;
    // Restaurant location address
    common.CommonAddress address = 4;
  }

  // BusinessHours contains detailed information about a store's operating hours,
  // including current status and schedule for each day of the week.
  message BusinessHours {
    // Current business status (open/closed).
    // In the future, we can support statuses like "closing soon", "temporarily closed", etc.
    BusinessHoursStatus status = 1;
    // Formatted opening / closing time message (e.g., "Closes 10 PM")
    google.protobuf.StringValue text = 2;
    // List of business hours for each day of the week
    repeated DaySchedule day_schedules = 3;
  }

  // DaySchedule represents the operating hours for a specific day of the week,
  // including the day name and formatted display text for the hours.
  message DaySchedule {
    // Day of the week (Sunday, Monday, etc...)
    string day_of_week = 1;
    // Formatted display text for this day's hours (e.g., "11:30 AM - 2 PM, 5 - 9 PM")
    // This can be single or multiple time periods, or arbitrary text like "Holiday Hours"
    string display_text = 2;
  }

  // BusinessHoursStatus represents the current operating status of a store.
  enum BusinessHoursStatus {
    // Default unspecified status
    BUSINESS_HOURS_STATUS_UNSPECIFIED = 0;
    // Restaurant is currently open
    BUSINESS_HOURS_STATUS_OPEN = 1;
    // Restaurant is currently closed
    BUSINESS_HOURS_STATUS_CLOSED = 2;
  }

  // ActionButtonsContent represents a group of interactive buttons that allow users
  // to perform actions like calling the store, visiting their website, or getting directions.
  message ActionButtonsContent {
    // List of action buttons
    // Should be a list of 0 - 4 buttons
    repeated ActionButton buttons = 1;
  }

  // ActionButton represents an individual interactive button with an icon, label,
  // and associated action type and value.
  message ActionButton {
    // Icon identifier for the button. Supports all valid Prism icons.
    string icon = 1;
    // Display text for the button
    string label = 2;
    // Type of action the button performs
    ActionType action_type = 3;
    // Action value (phone number, URL, etc)
    string value = 4;
  }

  // ActionType defines the different types of actions that can be performed
  // when an action button is triggered.
  enum ActionType {
    // Default unspecified action type
    ACTION_TYPE_UNSPECIFIED = 0;
    // Action to initiate a phone call
    ACTION_TYPE_CALL = 1;
    // Action to open a website
    ACTION_TYPE_WEBSITE = 2;
    // Action to get directions to the location
    ACTION_TYPE_DIRECTIONS = 3;
  }

  // StoreReactionContent a module for displaying store reaction buttons
  message StoreReactionContent {
    // StoreReaction data
    StoreReaction store_reaction = 1;
  }

  // MediaCollageContent represents a collection of images displayed in a collage format
  message MediaCollageContent {
    // List of image URLs to display in the collage
    repeated StoreMedia media_assets = 1;
  }

  // LLMSummaryContent represents AI-generated content about the store with citations
  message LLMSummaryContent {
    // The main text content generated by the LLM
    // This text should be markdown, so we can leverage bullet points, bold, italics, etc.
    string text = 1;
    // List of citations supporting the generated content
    repeated Citation citations = 2;
  }

  // MenuCategoryContent represents a group of related menu items under a specific category,
  // such as "Appetizers" or "Main Courses".
  message MenuCategoryContent {
    // Category name
    google.protobuf.StringValue name = 1;
    // List of menu items
    repeated MenuItem items = 2;
  }

  // MenuItem represents a single item on the menu with details like name, price,
  // description, and an optional image.
  message MenuItem {
    // Unique identifier for the menu item
    string id = 1;
    // Name of the menu item
    string name = 2;
    // Price of the item
    money.MonetaryFields price = 3;
    // URL of the item's image
    google.protobuf.StringValue image_url = 4;
    // Description of the item
    google.protobuf.StringValue description = 5;
  }
}
