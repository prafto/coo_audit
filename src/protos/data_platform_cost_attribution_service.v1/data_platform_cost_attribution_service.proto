syntax = "proto3";

package data_platform_cost_attribution_service.v1;

import "google/protobuf/wrappers.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/any.proto";
import "google/protobuf/struct.proto";

option java_multiple_files = true;
option java_package = "com.doordash.data.costAttribution.v1";
option java_generic_services = true;

// Indicate whether the request has been successfully completed
enum ResponseCode {
  // Unspecified
  RESPONSE_CODE_UNSPECIFIED = 0;
  // Request is successful
  RESPONSE_CODE_SUCCESS = 1;
  // Request fails
  RESPONSE_CODE_ERROR = 2;
}

// active enum
enum ActiveUseCase {
  /* unspecified usecase */
  ACTIVE_USE_CASE_UNSPECIFIED = 0;
  /* Used for showcasing an active retention rule */
  ACTIVE_USE_CASE_YES = 1;
  /* Used for showcasing an in-active retention rule */
  ACTIVE_USE_CASE_NO = 2;
}

// product type
message ProductTypeModel {
  // product type id
  string id = 1;
  // product type name
  string product_type_name = 2;
  // product type description
  string product_type_description = 3;
  /* product type is active or not */
  ActiveUseCase is_active = 4;
  /* when is the product type created */
  google.protobuf.Timestamp created_at = 5;
  /* who created the product type */
  string created_by = 6;
  /* when was the product type last updated */
  google.protobuf.Timestamp updated_at = 7;
  /* who updated the product type */
  string updated_by = 8;
}

// product
message ProductModel {
  // product id
  string product_id = 1;
  // product name
  string product_name = 2;
  // product type description
  string product_type_description = 3;
  /* product type is active or not */
  ActiveUseCase is_active = 4;
  /* when is the product created */
  google.protobuf.Timestamp created_at = 5;
  /* who created the product */
  string created_by = 6;
  /* when was the product last updated */
  google.protobuf.Timestamp updated_at = 7;
  /* who updated the product */
  string updated_by = 8;
  // product type id
  string product_type_id = 9;
  // product attributes
  repeated ProductAttributeModel product_attributes = 10;
  // object attributes
  repeated ObjectAttributeModel object_attributes = 11;
  // CZ url
  string cz_url = 12;
}

// product attribute
message ProductAttributeModel {
  // product attribute id
  string product_attribute_id = 1;
  // product attribute name
  string product_attribute_name = 2;
  // product id
  string product_id = 3;
  /* when is the product attribute created */
  google.protobuf.Timestamp created_at = 4;
  /* who created the product attribute */
  string created_by = 5;
  /* when was the product attribute last updated */
  google.protobuf.Timestamp updated_at = 6;
  /* who updated the product attribute */
  string updated_by = 7;
}

// object attribute
message ObjectAttributeModel {
  // object attribute id
  string object_attribute_id = 1;
  // object attribute name
  string object_attribute_name = 2;
  // product id
  string product_id = 3;
    /* when is the object attribute created */
  google.protobuf.Timestamp created_at = 4;
  /* who created the object attribute */
  string created_by = 5;
  /* when was the object attribute last updated */
  google.protobuf.Timestamp updated_at = 6;
  /* who updated the object attribute */
  string updated_by = 7;
  /* type of the object attribute */
  ObjectAttributeDimensionModel object_attribute_dimension = 8;
}

// type of object attribute
message ObjectAttributeDimensionModel {
  /* uuid generated by the server */
  string object_attribute_dimension_id = 1;
  /* dimension name */
  string object_attribute_dimension_name = 2;
}

// product attribute value on a specific date
message ProductAttributeValueModel {
  /* uuid generated by the server for attribute value */
  string product_attribute_value_id = 1;
  // product attribute id
  string product_attribute_id = 2;
  // product attribute value
  string product_attribute_value = 3;
  /* when is the product attribute value created */
  google.protobuf.Timestamp created_at = 4;
  /* who created the product attribute value  */
  string created_by = 5;
  /* when was the product attribute value  last updated */
  google.protobuf.Timestamp updated_at = 6;
  /* who updated the product attribute value  */
  string updated_by = 7;
  /* original timestamp on the product side */
  google.protobuf.Timestamp original_timestamp = 8;
}

// objects which are part of a product
message ObjectModel {
  /* uuid generated by the server for object */
  string object_id = 1;
  // pobject name - it could be a job, table etc
  string object_name = 2;
  // object description
  string object_description = 3;
  // product id
  string product_id = 4;
  /* when is the product attribute value created */
  google.protobuf.Timestamp created_at = 5;
  /* who created the product attribute value  */
  string created_by = 6;
  /* when was the product attribute value  last updated */
  google.protobuf.Timestamp updated_at = 7;
  /* who updated the product attribute value  */
  string updated_by = 8;
  /* object attribute values pertaining to this object */
  repeated ObjectAttributeValueModel object_attribute_values = 9;
  /* tags pertaining to this object */
  repeated ObjectTagMappingModel object_tags = 10;
}

// object attributes values will be part of this Model
message ObjectAttributeValueModel {
  // object attribute value id generated by the server
  string object_attribute_value_id = 1;
  // object attribute id
  string object_attribute_id = 2;
  // object attribute value
  string object_attribute_value = 3;
  /* uuid generated by the server for object */
  string object_id = 4;
  /* original timestamp on the product side */
  google.protobuf.Timestamp original_timestamp = 5;
  /* when is the product attribute value created */
  google.protobuf.Timestamp created_at = 6;
  /* who created the product attribute value  */
  string created_by = 7;
  /* when was the product attribute value  last updated */
  google.protobuf.Timestamp updated_at = 8;
  /* who updated the product attribute value  */
  string updated_by = 9;
}

// tags with the dimension
message TagModel {
   // tag id generated by the server
  string tag_id = 1;
  // dimension id generated by the server
  TagDimensionModel tag_dimension = 2;
  // tag value for the dimension
  string tag_value = 3;
  /* when is the product attribute value created */
  google.protobuf.Timestamp created_at = 4;
  /* who created the product attribute value  */
  string created_by = 5;
  /* when was the product attribute value  last updated */
  google.protobuf.Timestamp updated_at = 6;
  /* who updated the product attribute value  */
  string updated_by = 7;
}

// Object tag Mapping Model
message ObjectTagMappingModel {
  /* uuid generated by the server for object tag mapping */
  string object_tag_mapping_id = 1;
  /* uuid generated by the server for object */
  string object_id = 2;
  // tag id generated by the server
  TagModel tag = 3;
  /* when is the product attribute value created */
  google.protobuf.Timestamp created_at = 4;
  /* who created the product attribute value  */
  string created_by = 5;
  /* when was the product attribute value  last updated */
  google.protobuf.Timestamp updated_at = 6;
  /* who updated the product attribute value  */
  string updated_by = 7;
}

// tag dimensions like - Team, Vertical, Usecase etc
message TagDimensionModel {
  // dimension id generated by the server
  string tag_dimension_id = 1;
  // dimension name
  string tag_dimension_name = 2;
}

// product type create request
message SaveProductTypeRequest {
  // product type name
  string product_type_name = 1;
  // product type description
  string product_type_description = 2;
  /* who created the product type */
  string created_by = 3;
}

// product type create response
message SaveProductTypeResponse {
  /* product type object */
  ProductTypeModel product_type = 1;
  // Response code
  ResponseCode response_code = 2;
  // misc message for error handling
  string error_message = 3;
}

// empty product type request
message ListProductTypesRequest {

}

// product type response
message ListProductTypesResponse {
  /* all the store types */
  repeated ProductTypeModel product_types = 1;
  // Response code
  ResponseCode response_code = 2;
}

// product request
message ProductRequest {
  // product name
  string product_name = 1;
  // product type description
  string product_type_description = 2;
  // CZ url
  string cz_url = 3;
  /* when is the product created */
  google.protobuf.Timestamp created_at = 4;
  /* product attributes */
  repeated ProductAttributeRequest product_attribute_requests = 5;
  /* object attributes */
  repeated ObjectAttributeRequest  object_attribute_requests = 6;
}

// product attribute request
message ProductAttributeRequest {
  // product attribute name
  string product_attribute_name = 1;
}

// object attribute request
message ObjectAttributeRequest {
  // object attribute name
  string object_attribute_name = 1;
  // object attribute dimension
  string object_attribute_dimension = 2;
}

// product create request
message SaveProductRequest {
  /* product object */
  ProductRequest product = 1;
}

// product create response
message SaveProductResponse {
    /* product object */
  ProductModel product = 1;
  // Response code
  ResponseCode response_code = 2;
  // misc message for error handling
  string error_message = 3;
}

// update product request
message UpdateProductRequest {
    // product type description
  string product_type_description = 1;
  // CZ url
  string cz_url = 2;
  /* who updated the product attribute value  */
  string updated_by = 7;
}

// update product response
message UpdateProductResponse {
  /* product object */
  ProductModel product = 1;
  // Response code
  ResponseCode response_code = 2;
  // misc message for error handling
  string error_message = 3;
}

// empty products request
message ListProductsRequest {

}

// products response
message ListProductsResponse {
  /* all the products */
  repeated ProductModel products = 1;
  // Response code
  ResponseCode response_code = 2;
}

// product based on name request
message ListProductRequest {
  /* List product name details based on the name */
  string product_name = 1;
}

// product response based on name
message ListProductResponse {
  /* product details */
  ProductModel product = 1;
  // Response code
  ResponseCode response_code = 2;
}

// products based on product type request
message ListProductsByTypeRequest {
  // product type name
  string product_type_name = 1;
}

// products based on product type response
message ListProductsByTypeResponse {
  // products based on type
  repeated ProductModel products = 1;
  // Response code
  ResponseCode response_code = 2;
}

// create product attribute value
message SaveProductAttributeValueRequest {
  // product name
  string product_name = 1;
  // product attribute id
  string product_attribute_name = 2;
  // product attribute value
  string product_attribute_value = 3;
  /* who created the product attribute value  */
  string created_by = 4;
  /* original timestamp on the product side */
  google.protobuf.Timestamp original_timestamp = 5;
}

// product attribute value response
message SaveProductAttributeValueResponse {
  // product attribute value object
  ProductAttributeValueModel product_attribute_value = 1;
  // response code
  ResponseCode response_code = 2;
}

// update the product attribute value response
message UpdateProductAttributeValueRequest {
  /* product attribute value id*/
  string product_attribute_value_id = 1;
  // product attribute value
  string product_attribute_value = 2;
  // updated by
  string updated_by = 3;
  // original timestamp on the product side
  google.protobuf.Timestamp original_timestamp = 4;
}

// update the product attribute value response
message UpdateProductAttributeValueResponse {
  // product attribute value object
  ProductAttributeValueModel product_attribute_value = 1;
  // response code
  ResponseCode response_code = 2;
}
// onboarding a new object
message ObjectRequest {
  // object name - it could be a job, table etc
  string object_name = 1;
  // object description
  string object_description = 2;
  // product id
  string product_name = 3;
  /* who created the product attribute value  */
  string created_by = 4;
  /* object attributes values for the object */
  repeated ObjectAttributeValueRequest object_attribute_values = 5;
  /* tag for the object */
  repeated TagRequest tags = 6;
}

// object attribute value request
message ObjectAttributeValueRequest {
  // object attribute name
  string object_attribute_name = 1;
  // object attribute value
  string object_attribute_value = 2;
  /* original timestamp on the product side */
  google.protobuf.Timestamp original_timestamp = 3;
  /* who created the product attribute value  */
  string created_by = 4;
}

// tag request
message TagRequest {
  /* dimension name */
  string dimension_name = 1;
  /* tag name */
  string tag_name = 2;


}

// insert object into the cas metadata
message SaveObjectRequest {
  /* object which includes the attributes and tags */
  ObjectRequest object_request = 1;
}

// Object onboarding response
message SaveObjectResponse {
  // onboarded object along with tags and attributes
  ObjectModel object_model = 1;
  // Response code
  ResponseCode response_code = 2;
  // misc message for error handling
  string error_message = 3;

}

// Update Object with attributes and tags request
message UpdateObjectRequest {
  // object name - it could be a job, table etc
  string object_name = 1;
  // object description
  string object_description = 2;
  // product id
  string product_name = 3;
  /* who created the product attribute value  */
  string updated_by = 4;
  /* updated object attribute values */
  repeated UpdateObjectAttributeValueRequest object_attribute_values = 5;
  /* updated tags */
  repeated UpdateTagForObjectRequest tags = 6;
}

// Update Object Attribute value
message UpdateObjectAttributeValueRequest {
  // object attribute name
  string object_attribute_name = 1;
  // object attribute value
  string object_attribute_value = 2;
  /* original timestamp on the product side */
  google.protobuf.Timestamp original_timestamp = 3;
  /* who created the product attribute value  */
  string updated_by = 4;
}

// Update Tag for Object
message UpdateTagForObjectRequest {
  /* dimension name */
  string dimension_name = 1;
  /* tag name */
  string tag_name = 2;
}

// Update Object Response
message UpdateObjectResponse {
  // onboarded object along with tags and attributes
  ObjectModel object_model = 1;
  // Response code
  ResponseCode response_code = 2;
  // misc message for error handling
  string error_message = 3;
}

// Onboard Tag Dimension Request
message SaveTagDimensionRequest {
  /* dimension name */
  string tag_dimension_name = 1;
}

// Onboard Tag Dimension Response
message SaveTagDimensionResponse {
  /* tag Dimension object */
  TagDimensionModel tag_dimension = 1;
}

// Add a tag to the existing object
message SaveTagForObjectRequest {
  /* object name */
  string object_name = 1;
  /* product name */
  string product_name = 2;
  /* tag request object */
  TagRequest tag_request = 3;
}

// response for adding a tag to an object
message SaveTagForObjectResponse {
  // object tag mapping objects
  repeated ObjectTagMappingModel object_tag_mapping = 1;
}

// List Objects based on product
message ListObjectsByProductRequest {
  /* name of the product */
  string product_name = 1;
}

// List objects based on product response
message ListObjectsByProductResponse {
  /* objects based on the product name */
  repeated ObjectModel objects = 1;
}