syntax = "proto3";
package revenue_platform.event;

import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

option java_generic_services = true;
option java_multiple_files = true;
option java_package = "com.doordash.rpc.revenue_platform.event";

// Journal Entry Event generated by Revenue Platform Workflow
message JournalEntryEvent {
  // Entity object that hold more details on the generated JE
  oneof entity {
    // Order Cart entity
    OrderCart order_cart = 1;
    // Store Payment entity
    StorePayment store_payment = 2;
  }
  // Payment Category associated with the JE
  PaymentCategory payment_category = 3;
  // Journal Entry
  JournalEntry journal_entry = 4;
}

// Payment Category Enum
enum PaymentCategory {
  // Unspecified Payment Category
  PAYMENT_CATEGORY_UNSPECIFIED = 0;
  // STRIPE
  PAYMENT_CATEGORY_STRIPE = 1;
  // MARQETA
  PAYMENT_CATEGORY_MARQETA = 2;
}

// Order Cart entity
message OrderCart {
  // Order cart id associated with the Order Cart
  google.protobuf.StringValue order_cart_id = 1;
  // Order cart id associated with the Order Cart
  repeated google.protobuf.StringValue order_id = 2;
  // Delivery id associated with the Order Cart
  google.protobuf.StringValue delivery_id = 3;
  // Dispatch Error id associated with the Order Cart
  google.protobuf.StringValue dispatch_error_id = 4;
}

// Store Payment entity
message StorePayment {
  // Store Payment id associated with the Store Payment
  google.protobuf.StringValue store_payment_id = 1;
}

// Journal Entry data object
message JournalEntry {
  // JE id
  string id = 1;
  // JE Key
  string key = 2;
  // JE Accounting Event Name
  string accounting_event_name = 3;
  // JE Event Id
  string event_id = 4;
  // JE Entity Id
  string entity_id = 5;
  // JE COA Id
  string coa_id = 6;
  // JE Amount debited
  int64 amount_debited = 7;
  // JE Amount credited
  int64 amount_credited = 8;
  // JE Timezone
  google.protobuf.StringValue timezone = 9;
  // JE Currency
  string currency = 10;
  // JE Description
  string description = 11;
  // JE Booking time
  google.protobuf.Timestamp booking_time = 12;
  // JE Country Id
  string country_id = 13;
  // JE Debit Account
  string debit_account = 14;
  // JE Credit Account
  string credit_account = 15;
  // JE Account Description
  string account_description = 16;
  // JE is delta record
  google.protobuf.BoolValue is_delta = 17;
  // JE is test record
  google.protobuf.BoolValue is_test = 18;
}
