syntax = "proto3";

package doordash.retail.inventory.v1;

import "common/code.proto";
import "doordash.retail.inventory.v1/common.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

option java_generic_services = true;
option java_multiple_files = true;
option java_package = "com.doordash.rpc.retail.inventoryservice";

// Service to manage promotion in RIS
service PromotionManagementService {
  // Create or update promotion
  rpc CreateOrUpdatePromotion(CreateOrUpdatePromotionRequest) returns (CreateOrUpdatePromotionResponse);
}

// Request for upsert promotion
message CreateOrUpdatePromotionRequest {
  reserved 2;
  reserved "promotion";
  // Store information such as businessId and storeId for promotion request, required
  StoreInfo store_info = 1;
  // UUID to associate and track the request
  google.protobuf.StringValue request_id = 3;
  // Source of the promotion
  SourceOfFeed source = 4;
  // The promotions to create or update
  repeated PromotionInfo promotion_info = 5;
}

// Response for upsert promotion
message CreateOrUpdatePromotionResponse {
  // UUID to associate and track the request. If request ID
  // was provided in the request, this will be the same value as that.
  // Otherwise, a new UUID will be generated by the service.
  google.protobuf.StringValue request_id = 1;
  // gRPC response code
  code.Code code = 2;
  // Error message if there is any
  google.protobuf.StringValue error_message = 3;
}
